{"version":3,"sources":["uni-app:///main.js","webpack:///D:/ysyFile/code/selfWork/wit/pages/manage/manageSet/list.vue?e0d3","webpack:///D:/ysyFile/code/selfWork/wit/pages/manage/manageSet/list.vue?b4ca","webpack:///D:/ysyFile/code/selfWork/wit/pages/manage/manageSet/list.vue?54b1","webpack:///D:/ysyFile/code/selfWork/wit/pages/manage/manageSet/list.vue?0bdb","uni-app:///pages/manage/manageSet/list.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,qG,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;;;AAGnD;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,gQAEN;AACP,KAAK;AACL;AACA,aAAa,8OAEN;AACP,KAAK;AACL;AACA,aAAa,8OAEN;AACP,KAAK;AACL;AACA,aAAa,8OAEN;AACP,KAAK;AACL;AACA,aAAa,gQAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACrDA;AAAA;AAAA;AAAA;AAAk0B,CAAgB,kyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACuCt1B,0C,CAAA,e,YAAA,e,CAAA,c,YAAA,c;AACA,2C,CAAA,a,aAAA,a;AACA;AACA,MADA,kBACA;AACA;AACA,kBADA;AAEA,YAFA;AAGA,YAHA;AAIA,qBAJA;AAKA;AACA,kBADA,EACA;AACA,iBAFA,CAEA;AAFA,OALA;AASA,YATA;AAUA,sBAVA;AAWA,oBAXA;;AAaA,GAfA;AAgBA,SAhBA,qBAgBA;AACA;AACA;AACA;AACA,GApBA;AAqBA;AACA;AACA,eAFA,yBAEA;AACA;AACA;AACA,KALA;AAMA,iBANA,2BAMA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA,KAdA;AAeA,uBAfA,iCAeA;AACA,oBADA,GACA;AACA,+BADA;AAEA,yBAFA;AAGA,gCAHA,EADA;;AAMA,4CANA,SAMA,IANA;AAOA,4CAPA;AAQA,KAvBA;AAwBA,eAxBA,yBAwBA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA,KA/BA;AAgCA,SAhCA,mBAgCA;AACA;AACA,KAlCA;AAmCA,iBAnCA,yBAmCA,MAnCA,EAmCA;AACA;AACA;AACA;AACA;AACA,KAxCA;AAyCA;AACA,cA1CA,wBA0CA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA,KAjDA;AAkDA;AACA,aAnDA,qBAmDA,EAnDA,EAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AANA,gRAOA,CA1DA;AA2DA,aA3DA,uBA2DA;AACA;AACA,KA7DA;AA8DA,WA9DA,qBA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBADA;AAEA,2CAFA,EAEA;AACA,6CAHA,EAGA;AACA,qCAJA;AAKA,oEALA;AAMA,iCANA;;AAQA;AACA,OAVA,MAUA;AACA;AACA;AACA,KAtFA;AAuFA;AACA,mBAxFA,2BAwFA,KAxFA,EAwFA;AACA,uCADA,SACA,GADA;AAEA;AACA;AACA;AACA;AACA;AACA,iBALA,MAKA;AACA;AACA,iBATA;AAUA,KAlGA;AAmGA,aAnGA,qBAmGA,MAnGA,EAmGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SALA;AAMA;AACA;AACA,KA9GA,EArBA,E","file":"pages/manage/manageSet/list.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/manage/manageSet/list.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./list.vue?vue&type=template&id=01aedcf1&\"\nvar renderjs\nimport script from \"./list.vue?vue&type=script&lang=js&\"\nexport * from \"./list.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../usefulSoft/HBuilderX.3.2.3.20210825/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/manage/manageSet/list.vue\"\nexport default component.exports","export * from \"-!../../../../../../../usefulSoft/HBuilderX.3.2.3.20210825/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../usefulSoft/HBuilderX.3.2.3.20210825/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../usefulSoft/HBuilderX.3.2.3.20210825/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../usefulSoft/HBuilderX.3.2.3.20210825/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../usefulSoft/HBuilderX.3.2.3.20210825/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../usefulSoft/HBuilderX.3.2.3.20210825/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./list.vue?vue&type=template&id=01aedcf1&\"","var components\ntry {\n  components = {\n    uniTable: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-table/components/uni-table/uni-table\" */ \"@/uni_modules/uni-table/components/uni-table/uni-table.vue\"\n      )\n    },\n    uniTr: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-table/components/uni-tr/uni-tr\" */ \"@/uni_modules/uni-table/components/uni-tr/uni-tr.vue\"\n      )\n    },\n    uniTh: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-table/components/uni-th/uni-th\" */ \"@/uni_modules/uni-table/components/uni-th/uni-th.vue\"\n      )\n    },\n    uniTd: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-table/components/uni-td/uni-td\" */ \"@/uni_modules/uni-table/components/uni-td/uni-td.vue\"\n      )\n    },\n    uniPopup: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup/uni-popup\" */ \"@/uni_modules/uni-popup/components/uni-popup/uni-popup.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../usefulSoft/HBuilderX.3.2.3.20210825/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../usefulSoft/HBuilderX.3.2.3.20210825/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../usefulSoft/HBuilderX.3.2.3.20210825/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../usefulSoft/HBuilderX.3.2.3.20210825/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../usefulSoft/HBuilderX.3.2.3.20210825/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../usefulSoft/HBuilderX.3.2.3.20210825/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../usefulSoft/HBuilderX.3.2.3.20210825/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../usefulSoft/HBuilderX.3.2.3.20210825/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../usefulSoft/HBuilderX.3.2.3.20210825/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../usefulSoft/HBuilderX.3.2.3.20210825/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./list.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container bg-base\">\r\n\t\t<uni-table border emptyText=\"暂无更多数据\" class=\"base-table\">\r\n\t\t    <!-- 表头行 stripe-->\r\n\t\t    <uni-tr>\r\n\t\t        <uni-th align=\"center\" width=\"100rpx\">序号</uni-th>\r\n\t\t        <uni-th align=\"center\">原料类别</uni-th>\r\n\t\t        <uni-th align=\"center\" width=\"260rpx\">干燥比（%）</uni-th>\r\n\t\t    </uni-tr>\r\n\t\t    <!-- 表格数据行 -->\r\n\t\t    <uni-tr :bgColor=\"item.num == selectedNum ? '#009ad6':''\" v-for=\"item in dataList\" v-key=\"item.cmd\"  @row-click=\"getCurrentRow(item)\">\r\n\t\t        <uni-td>{{item.num}}</uni-td>\r\n\t\t        <uni-td>{{item.type}}</uni-td>\r\n\t\t        <uni-td>{{item.dry}}</uni-td>\r\n\t\t    </uni-tr>\r\n\t\t</uni-table>\r\n\t\t<view class=\"btns-box flex-btw\">\r\n\t\t\t<button type=\"default\" size=\"mini\" @click=\"openUserSet()\">修改</button>\r\n\t\t\t<!-- <button type=\"default\" size=\"mini\" @click=\"goto('/pages/about/about')\">确定</button> -->\r\n\t\t</view>\r\n\t\t<uni-popup ref=\"popup\" type=\"dialog\" :animation=\"true\" >\r\n\t\t\t<form class=\"dialog-form flex-center\">\r\n\t\t\t\t<!-- <view class=\"uni-form-item flex-center\">\r\n\t\t\t\t\t<view class=\"title\">原料类别：</view>\r\n\t\t\t\t\t<input class=\"uni-input\" v-model=\"manageSet.type\" type=\"text\"  placeholder=\"请输入原料类别\" />\r\n\t\t\t\t</view> -->\r\n\t\t\t\t<view class=\"uni-form-item flex-center\">\r\n\t\t\t\t\t<view class=\"title\">干燥比：</view>\r\n\t\t\t\t\t<input class=\"uni-input\" v-model=\"manageSet.dry\" type=\"text\"  placeholder=\"请输入干燥比(°C)\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"form-btns-box\">\r\n\t\t\t\t\t<view class=\"pass-btn btn-canle\" @click=\"cancleBtn(1)\">取消</view>\r\n\t\t\t\t\t<view class=\"pass-btn btn-sure\" @click=\"sureBtn(2)\">确定</view>\r\n\t\t\t\t</view>\r\n\t\t\t</form>\r\n\t\t</uni-popup>\r\n\t</view>\t\n</template>\n<script>\r\n\tconst {getMaterialList,updateMaterial} = require('@/utils/api');\r\n\tconst {durationToast} = require('@/utils/util');\r\n\texport default {\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\tdataList:[],\r\n\t\t\t\tsn:'',\r\n\t\t\t\tcmd:5,\r\n\t\t\t\tselectedNum:'',\r\n\t\t\t\tmanageSet:{\r\n\t\t\t\t\t\"type\":\"\",//原料类别\r\n\t\t\t\t\t\"dry\":'',//干燥比\r\n\t\t\t\t},\r\n\t\t\t\tid:'',\r\n\t\t\t\trefreshTimer:'',\r\n\t\t\t\trefreshTime:0\r\n\t\t    }\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tconst terminalKey = uni.getStorageSync('terminalKey');\r\n\t\t\tthis.sn = terminalKey;\r\n\t\t\tthis.getMaterialListData();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//刷新数据\r\n\t\t\trefreshData(){\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\tthis.refreshTimer = setInterval(()=>{_this.handleRefresh()},2000);\r\n\t\t\t},\r\n\t\t\thandleRefresh(){\r\n\t\t\t\tthis.refreshTime++;\r\n\t\t\t\tif(this.refreshTime > 5){\r\n\t\t\t\t\tthis.refreshTime = 0;\r\n\t\t\t\t\tthis.refreshTimer && clearInterval(this.refreshTimer);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.getMaterialListData('-1');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync getMaterialListData(msg=\"\"){\r\n\t\t\t\tconst data = {\r\n\t\t\t\t\tsn: this.sn,\r\n\t\t\t\t\tpage:0,\r\n\t\t\t\t\tpageSize:1000\r\n\t\t\t\t}\r\n\t\t\t\tlet info = await getMaterialList(data,msg);\r\n\t\t\t\tthis.handleRes(info.data);\r\n\t\t\t},\r\n\t\t\topenUserSet() {\r\n\t\t\t\tif(this.id){\r\n\t\t\t\t\tthis.manageSet.id = this.id;\r\n\t\t\t\t\tthis.$refs.popup.open();\r\n\t\t\t\t}else{\r\n\t\t\t\t  durationToast('请先选择某一行数据！',2000);\t\r\n\t\t\t\t}\t\r\n\t\t\t},\r\n\t\t\tclose() {\r\n\t\t\t\tthis.$refs.popup.close()\r\n\t\t\t},\r\n\t\t\tgetCurrentRow(rowObj){\r\n\t\t\t\tconsole.log('id===', rowObj.num);\r\n\t\t\t\tthis.id = rowObj.num;\r\n\t\t\t\tthis.selectedNum = rowObj.num;\r\n\t\t\t\tthis.manageSet = rowObj;\r\n\t\t\t},\r\n\t\t\t//删除用户设置\r\n\t\t\tdelUserSet(){\r\n\t\t\t\tif(this.id){\r\n\t\t\t\t\tthis.userSet.id = this.id;\r\n\t\t\t\t\tthis.handleDel(id);\r\n\t\t\t\t}else{\r\n\t\t\t\t  durationToast('请先选择某一行数据！',2000);\t\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//执行删除操作\r\n\t\t\tasync handleDel(id){\r\n\t\t\t   \t// const res = await putCmd(param);\r\n\t\t\t   \t// if(res && res.code == 0){\r\n\t\t\t   \t// \tdurationToast('删除成功！',2000);\r\n\t\t\t   \t// }else{\r\n\t\t\t   \t// \tdurationToast('删除失败！',2000);\r\n\t\t\t   \t// }\r\n\t\t\t},\r\n\t\t\tcancleBtn(){\r\n\t\t\t\tthis.close();\r\n\t\t\t},\r\n\t\t\tsureBtn(){\r\n\t\t\t\t// const data = {\r\n\t\t\t\t// \t\"cmd\":this.cmd,\r\n\t\t\t\t// \t'sn':this.sn,\r\n\t\t\t\t// \t...this.userSet\r\n\t\t\t\t// }\r\n\t\t\t\t// const param = {\r\n\t\t\t\t// \tsn: this.sn,\r\n\t\t\t\t// \tcmd: this.cmd,\r\n\t\t\t\t// \tdata: JSON.stringify(data)\r\n\t\t\t\t// }\r\n\t\t\t\tif(this.manageSet.dry != \"\"){\r\n\t\t\t\t\tlet param = {\r\n\t\t\t\t\t\t'sn': this.sn,\r\n\t\t\t\t\t\t\"type\": this.manageSet.type || '',//原料类别\r\n\t\t\t\t\t\t\"planTime\": this.manageSet.planTime,//预烘时间\r\n\t\t\t\t\t\t\"temp\": this.manageSet.temp,\r\n\t\t\t\t\t\t\"dry\": this.manageSet.dry ? Number(this.manageSet.dry) : 0,\r\n\t\t\t\t\t\t'ID':this.manageSet.ID\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.updateManageSet(param);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdurationToast('干燥比不能为空！',2000);\r\n\t\t\t\t}\t\r\n\t\t\t},\r\n\t\t\t//添加管理设置\r\n\t\t\tasync updateManageSet(param){\r\n\t\t\t\tlet res = await updateMaterial(param);\r\n\t\t\t\tif(res && res.code == 0){\r\n\t\t\t\t\tthis.close();\r\n\t\t\t\t\t//this.getMaterialListData();\r\n\t\t\t\t\tdurationToast('修改成功',2000);\r\n\t\t\t\t\tthis.refreshData();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdurationToast('修改失败',2000);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleRes(result){\r\n\t\t\t\tlet list = [];\r\n\t\t\t\tif(result && Array.isArray(result)){\r\n\t\t\t\t\tresult.forEach((item,index)=>{\r\n\t\t\t\t\t\tlet itemObj = item;\r\n\t\t\t\t\t\titemObj.num=index+1;\r\n\t\t\t\t\t\t//  itemObj.status = item.state == 1? '调用':'未调用';\r\n\t\t\t\t\t\tlist.push(itemObj);\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tthis.dataList = list;\r\n\t\t\t}\r\n\t\t}\r\n\t}\n</script>\n\n<style>\n</style>\n\n"],"sourceRoot":""}